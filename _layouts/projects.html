<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }} · Ryan Wong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #f5f5f5;
      --surface: #ffffff;
      --text: #111827;
      --text-soft: #6b7280;
      --accent: #d90429;
      --border: #e5e7eb;
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont,
                   "SF Pro Text", "Segoe UI", sans-serif;
      --max-width: 960px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-sans);
      -webkit-font-smoothing: antialiased;
      padding: 24px 16px 48px;
    }

    .page { max-width: var(--max-width); margin: 0 auto; }

    header { margin-bottom: 20px; }

    .top-bar {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }

    .wordmark {
      font-size: 18px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent);
    }

    .nav {
      font-size: 12px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .nav a {
      text-decoration: none;
      color: inherit;
      padding-bottom: 2px;
      border-bottom: 1px solid transparent;
      transition: border-color 120ms ease-out, color 120ms ease-out;
    }

    .nav a:hover {
      border-bottom-color: var(--text-soft);
      color: #111827;
    }

    .hero-title {
      font-size: clamp(26px, 3vw, 30px);
      line-height: 1.1;
      letter-spacing: -0.04em;
      margin-top: 14px;
      margin-bottom: 4px;
    }

    .hero-meta {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    main {
      background: var(--surface);
      border-radius: 20px;
      border: 1px solid var(--border);
      padding: 20px 22px 20px;
    }

    .summary {
      font-size: 14px;
      color: var(--text-soft);
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .meta-list {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 16px;
    }

    .meta-list span + span::before {
      content: "•";
      padding: 0 6px;
    }

    .links {
      font-size: 12px;
      margin-bottom: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px 14px;
    }

    .links-label {
      font-size: 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin-right: 4px;
    }

    .links a {
      text-decoration: none;
      color: var(--text-soft);
      border-bottom: 1px solid transparent;
      padding-bottom: 1px;
      transition: color 120ms ease-out, border-color 120ms ease-out;
    }

    .links a:hover {
      color: #111827;
      border-bottom-color: #111827;
    }

    .content {
      font-size: 14px;
      line-height: 1.6;
      color: var(--text);
      margin-top: 4px;
    }

    .content h2 {
      font-size: 15px;
      margin-top: 18px;
      margin-bottom: 6px;
    }

    .content h3 {
      font-size: 14px;
      margin-top: 14px;
      margin-bottom: 4px;
    }

    .content ul, .content ol {
      padding-left: 20px;
      margin-top: 4px;
      margin-bottom: 8px;
    }

    .content p + p {
      margin-top: 8px;
    }

    .content code {
      font-size: 12px;
      background: #e5e7eb;
      padding: 1px 4px;
      border-radius: 4px;
    }

    .updates-separator {
      margin: 20px 0;
      border: none;
      border-top: 1px solid #e5e7eb;
    }

    .updates {
      margin-top: 4px;
    }

    .updates-title {
      font-size: 15px;
      margin-bottom: 8px;
    }

    .update-list {
      list-style: none;
      padding-left: 0;
      font-size: 13px;
    }

    .update-item {
      margin-bottom: 10px;
    }

    .update-date {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #6b7280;
      margin-bottom: 1px;
    }

    .update-title {
      font-weight: 500;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="top-bar">
        <div class="wordmark">Ryan Wong</div>
        <nav class="nav">
          <a href="{{ "/" | relative_url }}">← Back to index</a>
        </nav>
      </div>

      <h1 class="hero-title">{{ page.title }}</h1>
      <div class="hero-meta">
        {% if page.status %}{{ page.status | upcase }}{% endif %}
        {% if page.stage %} · {{ page.stage | upcase }}{% endif %}
      </div>
    </header>

    <main>
      {% if page.summary %}
        <p class="summary">{{ page.summary }}</p>
      {% endif %}

      {% if page.meta %}
        <div class="meta-list">
          {% for item in page.meta %}
            <span>{{ item }}</span>
          {% endfor %}
        </div>
      {% endif %}

      {% if page.links %}
        <div class="links">
          <span class="links-label">Links</span>
          {% for link in page.links %}
            <a href="{{ link.url }}">{{ link.label }}</a>
          {% endfor %}
        </div>
      {% endif %}

      <div class="content">
        {{ content }}
      </div>

      {% comment %}
        Project updates: all docs in _project_updates with project == page.slug
        We sort them by date (newest first) and only show visibility == "public"
        on the public-facing project page.
      {% endcomment %}
      {% assign all_updates = site.project_updates | where: "project", page.slug %}
      {% assign sorted_updates = all_updates | sort: "date" | reverse %}
      {% assign public_updates = sorted_updates | where: "visibility", "public" %}

      {% if public_updates.size > 0 %}
        <hr class="updates-separator">
        <section class="updates">
          <h2 class="updates-title">Updates</h2>
          <ul class="update-list">
            {% for u in public_updates %}
              <li class="update-item">
                <div class="update-date">
                  {{ u.date | date: "%Y-%m-%d" }}
                </div>
                {% if u.title %}
                  <div class="update-title">{{ u.title }}</div>
                {% endif %}
                <div>
                  {{ u.content | markdownify }}
                </div>
              </li>
            {% endfor %}
          </ul>
        </section>
      {% endif %}
    </main>
  </div>
</body>
</html>
